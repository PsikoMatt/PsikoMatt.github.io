<!DOCTYPE html>
<html>
<head>
    <title>Resim Tabanlı Online Test</title>
    <style>
        .correct-answer {
            background-color: #9aff99; /* Yeşil arkaplan rengi */
        }

        #show-correct-button {
            margin-top: 5px; /* Butonun üstündeki boşluğu ayarlar */
        }

        #nav-buttons, #show-correct-button {
            margin-top: 20px; /* Yeni bir boşluk ekler */
        }

        #question-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px; /* Soru resmi ile altındaki kısım arasına boşluk ekler */
        }

        #question-image-container {
            flex: 1;
        }

        #optical-form {
            flex: 1;
            margin-left: 20px; /* Soru resmi ile cevap seçenekleri arasındaki boşluğu ayarlar */
        }

        #button-container {
            text-align: right; /* Butonları sağa hizalar */
        }
    </style>
</head>
<body>
    <h1>Resim Tabanlı Online Test</h1>

    <div id="question-container">
        <div id="question-image-container">
            <img id="question-image" src="soru1.jpg" alt="Soru Resmi">
        </div>
        <form id="optical-form">
            <h2>Cevap Seçenekleri</h2>
            <label for="choice-a" id="label-a">A</label>
            <input type="radio" id="choice-a" name="answer" value="A" onclick="autoSaveAnswer()">
            
            <label for="choice-b" id="label-b">B</label>
            <input type="radio" id="choice-b" name="answer" value="B" onclick="autoSaveAnswer()">
            
            <label for="choice-c" id="label-c">C</label>
            <input type="radio" id="choice-c" name="answer" value="C" onclick="autoSaveAnswer()">
            
            <label for="choice-d" id="label-d">D</label>
            <input type="radio" id="choice-d" name="answer" value="D" onclick="autoSaveAnswer()">
            
            <label for="choice-e" id="label-e">E</label>
            <input type="radio" id="choice-e" name="answer" value="E" onclick="autoSaveAnswer()">
        </form>
    </div>

    <div id="button-container">
        <div id="nav-buttons">
            <button id="prev-button" onclick="prevQuestion()">Önceki Soru</button>
            <button id="next-button" onclick="nextQuestion()">Sonraki Soru</button>
            <button id="end-test-button" onclick="endTest()">Testi Sonlandır</button>
        </div>
        <button id="show-correct-button" onclick="showCorrectAnswer()">Doğru Cevabı Göster</button>
    </div>

    <div id="result" style="display:none;">
        <h2>Test Sonucu</h2>
        <p id="result-text"></p>
        <button id="review-answers-button" onclick="reviewAnswers()">Yanlışlarımı İncele</button>
    </div>

    <script>
        var questions = [
            {
                image: "soru1.jpg",
                correctAnswer: "A"
            },
            {
                image: "soru2.jpg",
                correctAnswer: "B"
            },
            // Diğer soruları buraya ekleyin
        ];

        var currentQuestion = 0;
        var userAnswers = new Array(questions.length);
        var wrongAnswers = [];
        var correctAnswerShown = false;

        function loadQuestion() {
            var questionImageElement = document.getElementById("question-image");
            questionImageElement.src = questions[currentQuestion].image;
            
            var choices = document.getElementsByName("answer");
            for (var i = 0; i < choices.length; i++) {
                choices[i].checked = userAnswers[currentQuestion] === choices[i].value;
                choices[i].parentNode.classList.remove("correct-answer");
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                loadQuestion();
                correctAnswerShown = false; // Yeni soru için doğru cevap gizlendi.
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
                correctAnswerShown = false; // Yeni soru için doğru cevap gizlendi.
            }
        }

        function autoSaveAnswer() {
            var choices = document.getElementsByName("answer");
            for (var i = 0; i < choices.length; i++) {
                if (choices[i].checked) {
                    userAnswers[currentQuestion] = choices[i].value;
                    break;
                }
            }
        }

        function endTest() {
            var correctCount = 0;
            var wrongCount = 0;
            var emptyCount = 0;

            for (var i = 0; i < questions.length; i++) {
                if (!userAnswers[i]) {
                    emptyCount++;
                } else if (userAnswers[i] === questions[i].correctAnswer) {
                    correctCount++;
                    document.getElementById("label-" + userAnswers[i].toLowerCase()).parentNode.classList.add("correct-answer");
                } else {
                    wrongCount++;
                    wrongAnswers.push(i + 1); // Yanlış soruların indeksini sakla (1'den başladığını varsayıyoruz).
                }
            }

            var resultText = "Test Sonucu:<br>Doğru: " + correctCount + " soru<br>Yanlış: " + wrongCount + " soru<br>Boş: " + emptyCount + " soru";
            document.getElementById("result-text").innerHTML = resultText;
            document.getElementById("result").style.display = "block";
        }

        function showCorrectAnswer() {
            if (!correctAnswerShown) {
                var correctAnswerMessage = "Bu sorunun doğru cevabı " + questions[currentQuestion].correctAnswer + " seçeneğidir.";
                document.getElementById("label-" + questions[currentQuestion].correctAnswer.toLowerCase()).insertAdjacentHTML("afterend", "<div>" + correctAnswerMessage + "</div>");
                correctAnswerShown = true; // Doğru cevap bir kere gösterildi.
            }
        }

        function reviewAnswers() {
            var wrongAnswersMessage = "Yanlış Sorular:<br>" + wrongAnswers.join(", ");
            alert(wrongAnswersMessage);
        }

        loadQuestion();
    </script>
</body>
</html>
